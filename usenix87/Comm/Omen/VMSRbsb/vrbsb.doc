


     RRRRBBBB((((1111))))		   XXXXEEEENNNNIIIIXXXX SSSSyyyysssstttteeeemmmm	VVVV ((((OOOOMMMMEEEENNNN))))		 RRRRBBBB((((1111))))



     NNNNAAAAMMMMEEEE
	  rb - X/YMODEM	batch file receive

     SSSSYYYYNNNNOOOOPPPPSSSSIIIISSSS
	  rrbb [ --11bbqquuvv ]

	  rrbb [ --11bbccqquuvv ] _f_i_l_e

	  [[--]][[vv]]rrbbCCOOMMMMAANNDD

     DDDDEEEESSSSCCCCRRRRIIIIPPPPTTTTIIIIOOOONNNN
	  RRbb uses the XMODEM and YMODEM	error correcting protocols to
	  receive files	over a serial port from	a variety of programs
	  running under	PC-DOS,	CP/M, *nix, and	other operating
	  systems.

	  The first form of rrbb (Receive	Batch) receives	files with
	  YMODEM batch protocol.  Rb accepts either standard 128 byte
	  sectors or 1024 byte sectors (YAM kk option).	The user
	  should determine experimentally the conditions under which
	  use of 1k blocks actually improves throughput	without
	  causing problems.

	  Normally, the	file contents are converted to Unix
	  conventions by stripping carriage returns and	all characters
	  beginning with Control Z (CP/M end of	file).	If the raw
	  pathname ends	in ".A", ".ARC", ".CCC", ".CL",	".CMD",
	  ".COM", ".CRL", ".DAT", ".DIR", ".EXE", ".O",	".OBJ",
	  ".OVL", ".PAG", ".REL", ".SAV", ".SUB", ".SWP", ".SYS",
	  ".TAR", ".UTL", ".a",	".o", ".tar", or if the	first packet
	  contains data	that suggest a binary file (parity bits	or
	  characters in	the range 000 to 006 before the	first ^Z), or
	  if the file mode is transmitted and the 0100000 (most
	  significant) bit is set, that	file will be received in
	  binary mode anyway.  Otherwise, if the raw pathname ends in
	  .MSG,	or .TXT, an existing file will be appended to rather
	  than replaced.

	  If extended file information (file length, etc.) is
	  received, the	file length controls the number	of bytes
	  written to the output	dataset, and the modify	time and file
	  mode (iff non	zero) are set accordingly.

	  If no	extended file information is received, slashes in the
	  pathname are changed to underscore, and any trailing period
	  in the pathname is eliminated.  Normally, each file name is
	  converted to lower case unless it contains one or more lower
	  case letters.

	  If rb	is invoked with	stdout and stderr to different
	  datasets, Verbose is set to 2, causing frame by frame
	  progress reports to stderr.  This may	be disabled with the qq



     Page 1					     (printed 1/27/86)






     RRRRBBBB((((1111))))		   XXXXEEEENNNNIIIIXXXX SSSSyyyysssstttteeeemmmm	VVVV ((((OOOOMMMMEEEENNNN))))		 RRRRBBBB((((1111))))



	  option.

	  The second form of rrbb	receives a single _f_i_l_e with XMODEM
	  protocol.  The user must supply the file name	to both
	  sending and receiving	programs.

	  In the third form, rrbb	is invoked as rrbbCCOOMMMMAANNDD	(with an
	  optional leading - as	generated by login(1)).	 For each
	  received file, rb will pipe the file to ``COMMAND filename''
	  where	filename is the	name of	the transmitted	file with the
	  file contents	as standard input.

	  The file transfer is completed when COMMAND exits with 0
	  status.  A non zero exit status terminates the transfer.

	  A typical use	for this form is _r_b_r_m_a_i_l which calls rmail(1)
	  to post mail to the user specified by	the transmitted	file
	  name.	 For example, sending the file "caf" from a PC-DOS
	  system to _r_b_r_m_a_i_l on a Unix system would result in the
	  contents of the DOS file "caf" being mailed to user "caf".

	  On some Unix systems,	the login directory must contain a
	  link to COMMAND as login sets	SHELL=rsh which	disallows
	  absolute pathnames.  If invoked with a leading ``v'' rb will
	  report progress to LOGFILE.  The following entry works for
	  Unix 3.0:
		     rbrmail::5:1::/bin:/usr/local/rbrmail
	  If the SHELL environment variable includes _r_s_h or _r_k_s_h
	  (restricted shell), rb will not accept absolute pathnames or
	  references to	a parent directory, will not modify an
	  existing file, and removes any files received	in error.


	  The meanings of the available	options	are:

	  11    Use file	descriptor 1 for ioctls	and reads (Unix	only).
	       By default, file	descriptor 0 is	used.  This option
	       allows rrbb to be used with the _c_u	~$ command.
	  bb    Transfer	all files in binary (tell it like it is) mode.
	       This option disables file append.
	  cc    Request 16 bit CRC (single file transfers default to 8
	       bit checksum).
	  qq    Quiet suppresses	verbosity.
	  vv    _V_e_r_b_o_s_e causes a	list of	file names to be appended to
	       /tmp/rblog .  More v's generate more output.
	  uu    Retain upper case letters in file names
	       unconditionally.

     EEEEXXXXAAAAMMMMPPPPLLLLEEEESSSS






     Page 2					     (printed 1/27/86)






     RRRRBBBB((((1111))))		   XXXXEEEENNNNIIIIXXXX SSSSyyyysssstttteeeemmmm	VVVV ((((OOOOMMMMEEEENNNN))))		 RRRRBBBB((((1111))))



	  ( Unix command)
	       $ _r_b
	       rb: ready C
	  (Pro-YAM command)
	       <_A_L_T-_2>
	       YAM Command: _s_b *._h *._c

     SSSSEEEEEEEE AAAALLLLSSSSOOOO
	  YMODEM.DOC, IMP(CP/M), cu(1),	Professional-YAM manual,
	  sb(omen), usq(omen), undos(omen)

	  Compile time options required	for various operating systems
	  are described	in the rbsb.c source file.

     BBBBUUUUGGGGSSSS
	  Pathnames are	restricted to 127 characters.  In XMODEM
	  single file mode, the	pathname given on the command line is
	  still	processed as described above.  The CR/LF to NL
	  translation merely deletes CR's; undos(omen) performs	a more
	  intelligent translation.

     VVVVMMMMSSSS VVVVEEEERRRRSSSSIIIIOOOONNNN
	  Some of the #includes	with file names	enclosed with angle
	  brackets <> may need to have the angle brackets changed to
	  "", or vice versa.

	  The VMS version does not set binary mode according to	the
	  incoming file	type.  Non binary file processing consists of
	  stripping all	characters beginning with CPMEOF (^Z).

	  The VMS version does not set the file	time.

	  VMS sometimes	loses incoming characters, resulting in
	  retries and degradation of throughput.

	  The VMS C standard i/o package and RMS sometimes interact to
	  modify file contents unexpectedly.

	  The VMS version does not support invocation as rrbbCCOOMMMMAANNDD ..
















     Page 3					     (printed 1/27/86)






     SSSSBBBB((((1111))))		   XXXXEEEENNNNIIIIXXXX SSSSyyyysssstttteeeemmmm	VVVV ((((OOOOMMMMEEEENNNN))))		 SSSSBBBB((((1111))))



     NNNNAAAAMMMMEEEE
	  sb - X/YMODEM	Batch file Send

     SSSSYYYYNNNNOOOOPPPPSSSSIIIISSSS
	  ssbb [ --11ddffkkqquuvv	] _f_i_l_e ...
	  ssbb --XX	[ --11kkqquuvv ] _f_i_l_e

     DDDDEEEESSSSCCCCRRRRIIIIPPPPTTTTIIIIOOOONNNN
	  SSbb uses the XMODEM and YMODEM	error correcting protocols to
	  send files over a serial port	to a variety of	programs
	  running under	PC-DOS,	CP/M, *nix, and	other operating
	  systems.

	  The first form of ssbb sends one or more files with YMODEM
	  batch	protocol.  Normally, only the file name	part of	the
	  pathname is transmitted.  On Unix systems, additional
	  information about the	file is	transmitted.  If the receiving
	  program uses this information, the transmitted file length
	  controls the exact number of bytes written to	the output
	  dataset, and the modify time and file	mode are set
	  accordingly.

	  The second form of ssbb	uses the --XX flag to send a single _f_i_l_e
	  with XMODEM protocol.	 The user must supply the file name to
	  both sending and receiving programs.

	  If sb	is invoked with	stdout and stderr to different
	  datasets, Verbose is set to 2, causing frame by frame
	  progress reports to stderr.  This may	be disabled with the qq
	  option.

	  Iff sb is invoked with $SHELL	set and	iff that variable
	  contains the string _r_s_h or _r_k_s_h (restricted shell), sb
	  operates in restricted mode.	Restricted mode	restricts
	  pathnames to the current directory and PUBDIR
	  (conventionally, /usr/spool/uucppublic) and/or
	  subdirectories thereof.

	  Unix ssbb supports YMODEM-g with "cbreak" tty mode, XON/XOFF
	  flow control,	and the	interrupt character set	to CAN.
	  YMODEM-g (Pro-YAM gg option) increases	throughput over	error
	  free channels	(direct	connection, X.PC, etc.)	by not
	  acknowledging	each transmitted sector.

	  The meanings of the available	options	are:

	  11    Use file	descriptor 1 for ioctls	and reads (Unix	only).
	       By default, file	descriptor 0 is	used.  This option
	       allows ssbb to be used with the _c_u	^$ command.
	  XX    (XMODEM protocol) Send a	single file without the
	       filename	packet.
	  dd    Change all instances of "." to "/" in the transmitted



     Page 1					     (printed 1/27/86)






     SSSSBBBB((((1111))))		   XXXXEEEENNNNIIIIXXXX SSSSyyyysssstttteeeemmmm	VVVV ((((OOOOMMMMEEEENNNN))))		 SSSSBBBB((((1111))))



	       pathname.  Thus,	C.omenB0000 (which is unacceptable to
	       MSDOS or	CP/M) is transmitted as	C/omenB0000.  If the
	       resultant filename has more than	8 characters in	the
	       stem, a "." in inserted to allow	a total	of eleven.
	  ff    Send Full pathnname.  Normally directory	prefices are
	       stripped	from the transmitted filename.
	  kk    Send files using	1024 byte blocks rather	than the
	       default 128 byte	blocks.	 1024 byte packets speed file
	       transfers at high bit rates.
	  qq    Quiet suppresses	verbosity.
	  uu    Unlink the file after successful	transmission.
	  vv    _V_e_r_b_o_s_e causes a	list of	file names to be appended to
	       /tmp/sblog .  More v's generate more output.

     EEEEXXXXAAAAMMMMPPPPLLLLEEEESSSS
	  (Unix	command)
	       $ _s_b -_k *._c
	  (Pro-YAM command)
	       <_F_3>
	  (8-bit YAM Commands)
	       ^_E
	       >>>c: _r_t

     SSSSEEEEEEEE AAAALLLLSSSSOOOO
	  rb(omen), YMODEM.DOC,	Professional-YAM manual, IMP(CP/M),
	  cu(1), sq(omen), todos(omen),	tocpm(omen), tomac(omen)

	  Compile time options required	for various operating systems
	  are described	in the rbsb.c source file.

     BBBBUUUUGGGGSSSS
	  On VMS, some of the #includes	with file names	enclosed with
	  angle	brackets <> may	need to	have the angle brackets
	  removed, or vice versa.

	  The VMS version does not transmit the	file date.

	  The VMS version does not recognize YMODEM-g.

	  The VMS version calculates the file length by	reading	the
	  file and counting the	bytes.

	  When VMS is lightly loaded, the response time	may be too
	  quick	for MODEM7 unless the MODEM7 qq modifier	is used.

	  The VMS C standard i/o package and RMS sometimes interact to
	  modify file contents unexpectedly.








     Page 2					     (printed 1/27/86)



