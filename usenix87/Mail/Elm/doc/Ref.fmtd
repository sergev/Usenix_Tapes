











                           EEEEllllmmmm RRRReeeeffffeeeerrrreeeennnncccceeee GGGGuuuuiiiiddddeeee





                  _A _c_o_m_p_r_e_h_e_n_s_i_v_e _l_i_s_t _o_f _a_l_l _c_o_m_m_a_n_d_s,
                 _o_p_t_i_o_n_s _a_n_d _s_u_c_h _t_o _t_h_e EEEEllllmmmm _m_a_i_l _s_y_s_t_e_m





                               Dave Taylor

                       Hewlett-Packard Laboratories
                           1501 Page Mill Road
                               Palo Alto CA
                                  94304

               email: taylor@hplabs.HP.COM or hplabs!taylor










                  8888cccc9999 Copyright 1986, 1987 by Dave Taylor





























                           EEEEllllmmmm RRRReeeeffffeeeerrrreeeennnncccceeee GGGGuuuuiiiiddddeeee

                              (version 1.5)


                               Dave Taylor
                       Hewlett-Packard Laboratories
                           1501 Page Mill Road
                               Palo Alto CA
                                  94304

               email: taylor@hplabs.HP.COM or hplabs!taylor


                              March 13, 1987





       1.  IIIInnnnttttrrrroooodddduuuuccccttttiiiioooonnnn

               There are many parts to a  complex  software  system
       and  the  EEEEllllmmmm  mail  system  is no different.  This document
       describes fully all the options  available  in  the  mailer,
       including  the  starting options, the commands (in consider-
       ably more detail than in the _E_l_m _U_s_e_r_s _G_u_i_d_e) and the ._e_l_m_r_c
       file.

               To be more explicit, this document covers; a discus-
       sion  of  the ._e_l_m_r_c file, starting options of EEEEllllmmmm, outgoing
       mail processing, responses of  various  commands,  the  mail
       archive  file,  the  _n_o_t_e_s  system, the Alias system, system
       aliases etc, more on the EEEEllllmmmm utilities, and  a  section  for
       expert mail users.

               Without any further ado, then, let's get  this  show
       on the road!!




       2.  TTTThhhheeee ....eeeellllmmmmrrrrcccc FFFFiiiilllleeee

               The mailer, like  lots  of  other  software  on  the
       Unix8TM9  system,  has  the ability to automatically read in a
       configuration file at each invocation.   The  file  must  be
       called ._e_l_m_r_c and reside in your home directory for it to be
       found, and can have any of  the  following  entries  in  any
       order;




                                  Page 1







       Elm Reference Guide                              Version 1.5



       SSSSttttrrrriiiinnnngggg VVVVaaaarrrriiiiaaaabbbblllleeeessss

       alternatives This is a list of other machine/username combi-
                    nations that you receive mail from (forwarded).
                    This is used when the _g_r_o_u_p  _r_e_p_l_y  feature  is
                    invoked  to ensure that you don't send yourself
                    a copy of the outbound message.  (no default)

       calendar     This is used in conjunction with the  "<"  _s_c_a_n
                    _m_e_s_s_a_g_e  _f_o_r  _c_a_l_e_n_d_a_r  _e_n_t_r_i_e_s  command.   The
                    default place to put calendar entries if  found
                    is $_H_O_M_E/_c_a_l_e_n_d_a_r.  This variable can be set to
                    specify something else..

       editor       The editor to use when typing in new mail.   If
                    you select ``none'' or ``builtin'' you'll get a
                    Berkeley Mail style interface for all mail that
                    doesn't already have text in the buffer (e.g. a
                    reply,  mail  with   a   ``signature'',   etc).
                    (default  is to use the value of the $EDITOR in
                    your current environment)

       fullname     This is the name the mailer will use when send-
                    ing  mail  from  you.  It is highly recommended
                    that you use your full name and nothing strange
                    or  unusual,  as that can appear extremely rude
                    to people receiving your mail.  (Default is  to
                    use  the  "gecos"  field  from  the /_e_t_c/_p_a_s_s_w_d
                    file)

       mailbox      This is where to put incoming mail after you've
                    read it.  When you answer `n' to the "keep mes-
                    sages in incoming  mailbox?"  prompt,  this  is
                    where  the  messages  go!  (default is the file
                    _m_b_o_x in your home directory)

       maildir      This is the default mail directory, and is used
                    to  expand  filenames in the mailer when speci-
                    fied using the `=' metacharacter819.  That is, if
                    you  save  to file =/_s_t_u_f_f then the `=' will be
                    expanded to the current value of maildir.   (no
                    default)




       __________

        1. Note that `%' and `+' are synonymous with `=' throughout
           EEEEllllmmmm




                                  Page 2







       Elm Reference Guide                              Version 1.5



       pager        This defines the program to be used to  display
                    each  message.  The default is ``builtin'', and
                    can be changed while within the _E_l_m program  by
                    selecting the appropriate entry in the O)ptions
                    Menu.

       prefix       When you _r_e_p_l_y to a message or _f_o_r_w_a_r_d  a  mes-
                    sage  to  another  person,X  you can optionally
                    include the  original  message.   Defining  the
                    prefix  value  here allows you to indicate what
                    the prefix of each  included  line  should  be.
                    (default  is "> " and is fairly standard in the
                    Unix community)

       print        This indicates how  to  print  out  a  message.
                    There are two possible formats for this string,
                    either a  command  that  can  have  a  filename
                    affixed  to  (as a suffix) and then sent to the
                    system for execution, or a string that contains
                    the  meta-sequence  `%s' which will be replaced
                    by the name of the file and then also  sent  to
                    the shell.  Examples of each are;

                            print = print -formfeed
                            print = pr %s | lpr

                    (no default)

       savemail     This is where outgoing mail will  have  a  copy
                    silently  (and  quickly) saved.  This will only
                    be used if the flag _c_o_p_y is  turned  on.   Also
                    note  that  if  the  _s_a_v_e_n_a_m_e flag is turned on
                    then this line is ignored since  each  outgoing
                    message  is  saved according to whom it's being
                    sent to.  (default is to have this option  dis-
                    abled)

       shell        This defines the shell to use when doing  ``!''
                    escapes  and  such.  Note that the program also
                    reads the $SHELL variable out  of  the  current
                    environment,  but  that  defining  this  in the
                    .elmrc  file  will  override  the   environment
                    definition.

       signature    This file, if defined,  will  be  automatically
                    appended to all outbound mail before the editor
                    is invoked.  Furthermore, if you'd like a  dif-
                    ferent  ``.signature''  file for _l_o_c_a_l mail and
                    _r_e_m_o_t_e mail (remote being via other hosts), you
                    can   alternatively  define  two  files  called
                    _l_o_c_a_l_s_i_g_n_a_t_u_r_e and _r_e_m_o_t_e_s_i_g_n_a_t_u_r_e to have  the



                                  Page 3







       Elm Reference Guide                              Version 1.5



                    same functionality.

       sortby       When  reading  mailboxes,  either  incoming  or
                    saved,  you  can have them sorted by any number
                    of different ways.  This can be changed without
                    leaving  the EEEEllllmmmm system by changing the _o_p_t_i_o_n_s
                    _m_a_i_l-_s_o_r_t_e_d-_b_y field, but it can also be prede-
                    fined to any of the following;


                       from        This will sort according to whom
                                   each message is _f_r_o_m.

                       sent        This will  sort  _l_e_a_s_t  _r_e_c_e_n_t_l_y
                                   _s_e_n_t to _m_o_s_t _r_e_c_e_n_t_l_y _s_e_n_t.

                       received    This will  sort  _l_e_a_s_t  _r_e_c_e_n_t_l_y
                                   _r_e_c_e_i_v_e_d    to   _m_o_s_t   _r_e_c_e_n_t_l_y
                                   _r_e_c_e_i_v_e_d.

                       subject     This will sort according to  the
                                   _s_u_b_j_e_c_t of each message.

                       lines       This will sort _s_h_o_r_t_e_s_t to _l_o_n_g_-
                                   _e_s_t by message.

                       status      This  will  sort  by   priority,
                                   action,    new,   tagged,   then
                                   deleted order.

                    Each of these fields  can  also  optionally  be
                    prepended   with  the  sequence  "reverse-"  to
                    reverse the order of  the  sort.   The  sorting
                    method  in  the  sample ._e_l_m_r_c, for example, is
                    _r_e_v_e_r_s_e-_s_e_n_t, to have the new  mail  always  be
                    listed  first  in  the  headers (note that this
                    doesn't imply anything about  the  location  of
                    the message in the _m_a_i_l_b_o_x itself!)

       weedout      When specifying this option, you can then  list
                    headers that you ddddoooonnnn''''tttt want to see when you are
                    read mail.  This list can continue for as  many
                    lines  as  desired,  as  long  as the continued
                    lines all have leading  indentation.   (default
                    is ``Received:'' and others...)









                                  Page 4







       Elm Reference Guide                              Version 1.5



       NNNNuuuummmmeeeerrrriiiicccc VVVVaaaarrrriiiiaaaabbbblllleeeessss

       bounceback   This is a hop count threshold value and  allows
                    you  to set up the mailer so that when you send
                    mail more than _n machines away, it'll automati-
                    cally include a "Cc:" to you through the remote
                    machine.   In  practice  this  should  be  very
                    rarely  used.   (Note:  this  refuses to bounce
                    mail off an Internet address.  The  default  is
                    to  have  it  set  to  zero, which disables the
                    function)

       timeout      On more advances systems, it's nice to start up
                    the  mailer in a window and let it sit in back-
                    ground unless new mail  arrives  (see  _w_n_e_w_m_a_i_l
                    for  another  window  based  program)  at which
                    point it can be brought up to the forefront  of
                    the system and read.  In this case, it would be
                    quite convenient to have the mailer  internally
                    resynchronize  every ``delta'' seconds.  That's
                    exactly what this particular option allows.

                    This is also useful for normal  terminals,  for
                    example  you  can leave EEEEllllmmmm running at night (I
                    usually do) and when you come in in the morning
                    it'll be all ready to read your mail!

                    (The default is a 300 second (5 minute) timeout
                    period).

       userlevel    This is what the program uses to determine  the
                    relative  level of sophistication of the user -
                    the values are 0 for a new user (the  default),
                    1 for a good computer user, and 2 and above for
                    experts.


       BBBBoooooooolllleeeeaaaannnn VVVVaaaarrrriiiiaaaabbbblllleeeessss

       alwaysdelete When set, this changes the  default  answer  of
                   the  prompt  "Delete messages?" to the indicated
                   value.  (default is to have  the  answer  be  _N_o
                   (alwaysdelete=OFF))

       alwaysleave This changes the default  answer  on  the  "keep
                   mail  in  incoming mailbox?" prompt to the value
                   indicated (default is to have the default answer
                   be _N_o (that is, alwaysleave=OFF)

       arrow       Sometimes your are forced  to  use  a  slow,  or
                   ``dumb''  terminal.  In this case, you can force



                                  Page 5







       Elm Reference Guide                              Version 1.5



                   the current message pointer  to  be  the  ``->''
                   sequence  rather  than  the  inverse bar.  (Note
                   that this is identical in function to  the  `-a'
                   starting  option)  (default is OFF unless you're
                   on an IBM 3270) (I'll bet  you  think  I'm  jok-
                   ing...)

       ask         (or ``question'').  This allows you to tell  the
                   EEEEllllmmmm  system  that  you'd  rather  not  be  asked
                   ``Delete Mail?'' and such each  time  you  leave
                   the  program, and instead it should just use the
                   values of ``alwaysdelete''  and  ``alwaysleave''
                   without  prompting.    Useful if you're too lazy
                   to type two returns!  (default is OFF)

       autocopy    This is a boolean flag, and if set will automat-
                   ically  copy  the  text  of  each  message being
                   replied to into the edit  buffer.   (default  is
                   OFF)

       copy        This, in combination with the _s_a_v_e_m_a_i_l filename,
                   will allow you to have silent copies of all out-
                   going mail made on the outbound  step.  (default
                   is OFF)

       keep        The mail system has a habit  of  deleting  mail-
                   boxes  when you've removed everything from them.
                   With this option  turned  on,  it  will  instead
                   preserve  them  as zero-byte files.  (default is
                   OFF)

       keypad      If on, this tells EEEEllllmmmm that you have an HP termi-
                   nal  and  enables the <NEXT>, <PREV>, <HOME> and
                   <SHIFT-HOME> keys.  (default is OFF)

       menus       If  turned  off,  this  will  inhibit  the  Menu
                   display on all of the screen displays within the
                   _E_l_m program.  (default is ON)

       movepage    If this is turned on  then  commands  that  move
                   through  the  mailbox  by pages (notably the `+'
                   and `-', <PREV> and <NEXT> keys) will also  move
                   the  current  message pointer to the top of that
                   page of messages.  If this is  turned  off  then
                   moving  through  the  pages  doesn't  alter  the
                   current message pointer location.   (default  is
                   OFF)

       noheader    This  boolean  flag  tells  the  mailer  not  to
                   include  the  headers of messages when copying a
                   message into a file buffer for  replying  to  or



                                  Page 6







       Elm Reference Guide                              Version 1.5



                   forwarding.  (default is ON)

       pointnew    If this is turned on, the mailer will  automati-
                   cally  pointing to the first new message in your
                   mailbox when started, instead of at message  #1.
                   Note  that  this  is  only used for the incoming
                   mailbox!  (default is ON)

       resolve     This  is  a  boolean  flag  that   defines   the
                   behaviour  of  the  program  for such actions as
                   deletion, saving a message and so  on.  (default
                   is ON)

       savename    One of the problems with electronic mail systems
                   is  that  one  tends  to  get  very  large, one-
                   dimensional (flat) files that  contain  lots  of
                   completely  unrelated  mail.   If this option is
                   turned on, EEEEllllmmmm will use a more intelligent algo-
                   rithm  - on incoming mail, when you _s_a_v_e it, the
                   default mailbox to save to (changeable by press-
                   ing anything other than <return> of course) is a
                   file that is the _l_o_g_i_n _n_a_m_e of  the  person  who
                   sent  you  the message.  Similarly, when sending
                   mail out, instead of just blindly saving  it  to
                   the _s_a_v_e_m_a_i_l file, EEEEllllmmmm will first try to save it
                   to a file that is the login name of  the  person
                   who is  to  receive  the  mail829.   If  the  file
                   doesn't  already exist on outbound mail, then it
                   will save the mail in the _s_a_v_e_m_a_i_l file.

                   In practice, this means  that  important  people
                   that  you  communicate with (those that you tend
                   to save mail from) have files that are  actually
                   _a  _r_e_c_o_r_d_e_d _l_o_g _o_f _t_h_e _d_i_s_c_u_s_s_i_o_n _i_n _b_o_t_h _d_i_r_e_c_-
                   _t_i_o_n_s and those others (random mailings) are all
                   stuffed  in  the  _m_a_i_l_s_a_v_e file for easy perusal
                   and removal. (The default is ON)

       softkeys    If on, this tells EEEEllllmmmm that you have an HP termi-
                   nal  with  the HP 2622 function key protocol and
                   that you'd like to have them available while  in
                   the program.  (default is OFF)



       __________

        2. When sending to a group, it's saved to the first person
           in the list only.  One day we'll have _p_o_i_n_t_e_r_s to
           messages, then...




                                  Page 7







       Elm Reference Guide                              Version 1.5



       titles      This flag allows you to have the first line of a
                   message titled with:

                   Message #_N from _u_s_e_r_n_a_m_e                Mailed _d_a_t_e at _t_i_m_X_e

                   where all the information  has  been  previously
                   extracted  from the message.  This is especially
                   useful if you weed out all the headers  of  each
                   message with a large `weedout' list...  (default
                   is ON)

       warnings    The mailer likes to warn you when you send  mail
                   to  a  machine that cannot be directly accessed.
                   In some situations, however, the system  is  set
                   up  so  that  mail is automatically forwarded to
                   another machine that might then have better con-
                   nections.   Setting  this flag will allow you to
                   effectively shut off all the  warning  messages.
                   (default is ON)

       weed        This is a boolean flag that, in combination with
                   the  "weedout" list, allows you to custom define
                   the set of headers you would like  to  not  have
                   displayed  while  reading  messages. (default is
                   ON)

       One more thing: the format for each of the lines is;

               variable = value

       and for boolean variables, _v_a_l_u_e can be `ON' or `OFF' only.

       For a better idea of how this all works,  here's  my  ._e_l_m_r_c
       file.   While  looking  through it, notice that you can have
       lots of comments and blank lines for  readability  and  that
       you can also use `shell variables' and the `~' metacharacter
       for your home directory, and they are  expanded  accordingly
       when  read  in by the mailer.  (Note that this was automati-
       cally saved by the _E_l_m program -  versions  1.3b  and  above
       have  the ability to create ._e_l_m_r_c files on the fly from the
       O)ptions screen - it's quite useful)

         #
         # .elmrc - options file for the Elm mail system
         #
         # Saved automatically by Elm 1.5 for Dave Taylor
         #

         # where to save calendar entries
         calendar = ~/.Agenda




                                  Page 8







       Elm Reference Guide                              Version 1.5



         # what editor to use (none = simulate Berkeley Mail)
         editor = none

         # The full user name for outbound mail
         fullname = Dave Taylor

         # where to save messages to, default file
         mailbox = $HOME/Mail/mailbox

         # where to save my mail to, default directory
         maildir = /users/taylor/Mail

         # scroll through messages rather than paging...
         pager = builtin

         # prefix sequence for including message text in other messages...
         prefix = >_

         # how to print a message ('%s' is the filename)
         print = lpr -Plw2 %s

         # where to save mail if not specified somewhere else
         savemail = /users/taylor/Mail/mail.sent

         # The shell to use for shell escapes
         shell = /bin/csh

         # and how to sort mailboxes, by default
         sortby = Reverse-Received

         # should we always delete messages we've marked for deletion (change the
         # default answer to yes)
         alwaysdelete = ON

         # should we always leave messages as pending (change the default answer to yeXs)
         alwaysleave = ON

         # should we use the "->" rather than the inverse video bar?
         arrow = OFF

         # automatically copy message being replied to into buffer?
         autocopy = OFF

         # threshold for bouncing copies of remote uucp messages...
         # zero = disable function.
         bounceback = 0

         # save a copy of all outbound messages?
         copy = ON

         # we might mail out AT&T Mail Forms, too



                                  Page 9







       Elm Reference Guide                              Version 1.5



         forms = OFF

         # we're running on an HP terminal...
         keypad = OFF

         # should we display the three-line menus?
         menu = ON

         # when using the page commands (+ - <NEXT> <PREV>) change the current messageX pointer...
         movepage = ON

         # let's just show the names, though, when expanding aliases...
         names = ON

         # when messages are copied into the outbound buffer, don't include headers
         noheader = ON

         # start up by pointing to the first new message received, if possible
         pointnew = ON

         # emulate the Berkeley Mail message increment mode (only increment after someXthing
         # has been 'done' to a message, either saved or deleted)
         resolve = ON

         # save messages, incoming and outbound, by login name of sender/recipient
         savename = ON

         # we're running on an HP terminal and want function keys available too!
         softkeys = OFF

         # Set the main prompt timeout for resynching...
         timeout = 60

         # display message title when displaying pages of message
         titles = ON

         # are we good at it?  0=beginner, 1=intermediate, 2+ = expert!
         userlevel = 2

         # don't bother telling us what machines we can't get to...
         warnings = OFF

         # enable the weedout list to be read...
         weed = ON

         # what headers I DON'T want to see, ever.
         weedout = "Path:" "Via:" "Sent:" "Date" "Status:" "Original" "Phase" "SubjectX:" "Fruit" "Sun" "Lat"
               "Buzzword" "Return" "Posted" "Telephone" "Postal-Address" "Origin" "X-Sent-By-XNmail-V" "Resent"
               "X-Location" "Source" "Mood" "Neuron" "Libido" "To:" "X-Mailer:" "Full-Name:" X"X-HPMAIL" "Cc:"
               "cc:" "Mmdf" "Network-" "Really-" "Sender:" "Post" "Message-" "Relay-" "ArticlXe-" "Lines:"
               "Approved:" "Xref:" "Organization:"



                                 Page 10







       Elm Reference Guide                              Version 1.5



         # alternative addresses that I could receive mail from (usually a
         # forwarding mailbox) and don't want to have listed...
         alternatives = hplabs!taylor  hpldat!taylor  taylor@hplabs  taylor%hpldat





       3.  TTTThhhheeee SSSSttttaaaarrrrttttiiiinnnngggg PPPPaaaarrrraaaammmmeeeetttteeeerrrrssss

               There are a number of starting options  to  the  EEEEllllmmmm
       program, with only one that needs to be remembered: ``-?''or
       ``-h'' for help.

       The flags are;

       -a           Arrow.  This allows you to have the "->"  arrow
                    pointer  rather than the inverse bar.  This can
                    also be set in the  ._e_l_m_r_c  file  -  check  the
                    boolean variable _a_r_r_o_w).

       -c           Check  only.   This  is  useful  for  expanding
                    aliases  without sending any mail.  The invoca-
                    tion is just like sending mail: eeeellllmmmm ----cccc _a_l_i_a_s _o_r
                    _a_l_i_a_s_e_s.

       -d _n         Set debug level to _n.  Useful for debugging the
                    EEEEllllmmmm  program.   The  results of using the debug
                    option is much less drastic than in the  previ-
                    ous versions of the program - it creates a file
                    in your home  directory  called  _E_l_m._d_e_b_u_g._i_n_f_o
                    and  creates a (verbose) log of activity as the
                    program is used.

                    Level _n can be 1 through 11, where  the  higher
                    numbers generate more output.

       -f _f_i_l_e      File.  Read  specified  file  rather  than  the
                    default  input  mailbox.  Note that you can use
                    the same metacharacters (e.g. `=') as when  you
                    _c_h_a_n_g_e _m_a_i_l_b_o_x_e_s from within the program.

       -h or -?     Help.  Gives a short list of all these  options
                    and exit.

       -k           Keypad - This option, when used, lets  the  EEEEllllmmmm
                    program know that you're on an HP terminal, and
                    it can then interpret the  <PREV>,  <NEXT>  and
                    <HOME>/<SHIFT>-<HOME> keys accordingly.  If you
                    are not on an HP terminal,  it  is  recommended
                    that  you  do  NOT  use  this  option. (see the



                                 Page 11







       Elm Reference Guide                              Version 1.5



                    _k_e_y_p_a_d option in the ._e_l_m_r_c section)

       -K           Keypad + softkeys.  The EEEEllllmmmm mailer  can,  to  a
                    rather  limited  extent, use the HP softkeys as
                    an alternative form of input.  If  you  specify
                    this option be sure that you're on an HP termi-
                    nal that can accept the standard 2622  terminal
                    escape  sequences!  (see the _s_o_f_t_k_e_y_s option in
                    the ._e_l_m_r_c section for more information)

       -m           Inhibit display of the 3-line menu  when  using
                    the  mailer.   This, of course, gives you three
                    more message headers per page instead.

       -s _s_u_b_j_e_c_t   In batch mode, this is how to indicate the sub-
                    ject  of the resulting message.  Please see the
                    section on "Non-Interactive Uses of Elm" in the
                    _E_l_m _U_s_e_r_s _G_u_i_d_e for more information.

       -z           Zero.  This causes the mailer not to be started
                    if you don't have any mail.   This emulates the
                    behaviour of programs like _B_e_r_k_e_l_e_y _M_a_i_l.

               All the above flags default to  reasonable  options,
       so  there  is usually no need to use them.  Furthermore, the
       most used flags are available through the ._e_l_m_r_c file.   See
       above.




       4.  SSSSppppeeeecccciiiiaaaallll OOOOuuuuttttggggooooiiiinnnngggg MMMMaaaaiiiillll PPPPrrrroooocccceeeessssssssiiiinnnngggg



               There are a  few  extra  features  that  the  mailer
       offers on outgoing mail that are worthy of mention;


               The first, and probably the most exciting  feature839,
       is the ability  to  send  _e_n_c_r_y_p_t_e_d  mail!  To  do  this  is
       extremely  simple:   You  need  merely to have two key lines


       __________

        3. Unfortunately, at many non-US sites, it's quite probable
           that you won't be able to use this feature since you
           won't have the "crypt()" library available due to
           licensing restrictions.




                                 Page 12







       Elm Reference Guide                              Version 1.5



       ``[encode]'' and ``[clear]'' in the message body.

       Consider the following outgoing message:

               Joe,
                       Remember that talk we had about Amy?  Well,
               I talked to my manager about it and he said...

               uhh...better encrypt this...the usual `key'...

               [encode]

                       He said that Amy was having family problems and that it had been
               affecting her work.

                       Given this, I went and talked to her, and told her I was sorry for
               getting angry.  She said that she understood.

                       We're friends again!!
               [clear]

                       Exciting stuff, eh?

                                                Mike

       While this is obviously quite  readable  while  being  typed
       into  the  editor,  as  soon  as the message is confirmed as
       wanting to be sent, the EEEEllllmmmm mailer prompts with;

               Enter encryption key: @

       and accepts a key (a series of 8 or less characters) without
       echoing  them  to  the screen.  After entry, it will ask for
       the same key again  to  confirm  it,  then  *poof*  it  will
       encrypt and send the mail!

               If you have the _c_o_p_y  option  enabled,  the  program
       will  save your copy of the message encrypted too.  (This is
       to ensure the privacy and security  of  your  archived  mail
       too!)

               If the mailer doesn't ask for  the  encryption  key,
       it's  because you don't have the ``[encode]'' entered as the
       first 8 characters of the line.  It MUST be so for  this  to
       work!!

               On the other end, a person receiving this mail (they
       must  also be using EEEEllllmmmm to receive it, since this mailer has
       a unique encryption program) will be reading the message and
       then suddenly be prompted;




                                 Page 13







       Elm Reference Guide                              Version 1.5



               Enter decryption key: @

       and will again be asked to re-enter it to confirm.  The pro-
       gram  will then on-the-fly decrypt the mail and display each
       line as it is decoded.  The `[clear]'  line  signifies  that
       the block to encrypt is done.

               For those sites not running EEEEllllmmmm, a separate  program
       suitable  for  a filter for use with other mailers is avail-
       able.

       Note that it is not possible  currently  to  _p_i_p_e  or  _p_r_i_n_t
       encrypted mail.


               The other option on outgoing mail is the ability  to
       specify  what  section  of  the  message  you  want  to have
       archived (assuming _c_o_p_y is enabled)  and  what  section  you
       don't.   This  is  most  useful  for sending out source file
       listings and so on...

               To indicate the end of the section  that  should  be
       saved in the archive, you need merely to have the line

               [nosave]

       appear by itself on a line.  This will be removed  from  the
       outgoing  mail,  and will indicate the last line of the mes-
       sage in the saved mail.




       5.  RRRReeeessssppppoooonnnnsssseeeessss............



               This section will discuss each command  in  the  EEEEllllmmmm
       program in more detail than above, including the prompts the
       user can expect upon executing the command, the  meaning  of
       different options etc etc.


          ?      Help.  This command used  once  puts  you  in  the
                 _e_x_p_l_a_i_n  _k_e_y  mode,  where  any key you press will
                 result in  a  one-line  description  of  the  key.
                 Pressed again at this point will produce a summary
                 two  pages   listing   each   command   available.
                 <escape>  or  `.'  will  leave  the  help mode and
                 return you to the main menu level.




                                 Page 14







       Elm Reference Guide                              Version 1.5



          !      Shell.  This allows you to send a command  to  the
                 shell without leaving the program.

          |      Pipe.  This command allows you to pipe the current
                 message  or  the  set  of  _t_a_g_g_e_d messages through
                 other filters as you desire.  The shell  used  for
                 the  entire  command will be either the one speci-
                 fied in your ._e_l_m_r_c file, or, if none, /_b_i_n/_s_h.

          /      Pattern match.  This command, on  the  top  level,
                 allows the user to search through all the _f_r_o_m and
                 _s_u_b_j_e_c_t lines of the current mailbox  starting  at
                 the  current  message  and  continuing through the
                 end.  If the first character of the pattern  is  a
                 `/', then the program will try to match the speci-
                 fied pattern against  aaaannnnyyyy  line  in  the  mailbox.
                 Again,  this works from one after the current mes-
                 sage through the  end.   Both  searches  are  case
                 insensitive.

          <n>    Specify new current message.  Typing in any of the
                 digits  one  through  nine  will result in the EEEEllllmmmm
                 program producing the prompt `Set current to : n',
                 where `n' is the digit entered. Note that changing
                 the current  message  to  a  message  not  on  the
                 current  page  of the headers will result in a new
                 page of headers being displayed.

          <      Scan message for calendar entries.  A rather novel
                 feature  of  the  EEEEllllmmmm  mailer  is  the  ability to
                 automatically incorporate calendar/agenda informa-
                 tion  from  a mail message into the users calendar
                 file.  This is done quite simply; any message that
                 has either the pattern;

                       -> _c_a_l_e_n_d_a_r _e_n_t_r_y

                 or

                       - _m_u_l_t_i-_l_i_n_e
                       - _c_a_l_e_n_d_a_r _e_n_t_r_y

                 will be automatically added to the users  _c_a_l_e_n_d_a_r
                 file  (see the _c_a_l_e_n_d_a_r option of the ._e_l_m_r_c file)
                 if the `<' command is used.  The  main  difference
                 between  the  two  formats  is  that  the first is
                 assumed to be a _c_a_l_e_n_d_a_r(_1)  entry  (the  `->'  is
                 stripped  off),  and  the second is a more generic
                 format (only the `- ' is stripped off).

                 For example, let's say we had a message  with  the



                                 Page 15







       Elm Reference Guide                              Version 1.5



                 text;

                         Regardless of that meeting, here's the seminar stuff;

                         -> 8/03 3:00pm: AI Seminar with Ira Goldstein of HP Labs

                 then using the `<' command would add the line;

                   8/03 3:00pm: AI Seminar with Ira Goldstein of HP Labs

                 to the users _c_a_l_e_n_d_a_r file.

          a      Alias.  The alias system is a way  by  which  more
                 complex  mail  addresses  can be shortened for the
                 mail user.  For example;

                   joe, bleu : Joe Bleu : joe@hpcfla

                 which allows mail to `joe' or `bleu' with the sys-
                 tem  expanding  the address properly.  As is obvi-
                 ous,  this  not  only  saves  remembering  complex
                 addresses, it also allows the address to be optim-
                 ized to go through the minimum number of  machines
                 without  anyone  having  to  be  informed  of  the
                 change.  A more detailed discussion can  be  found
                 in either the section entitled _T_h_e _A_l_i_a_s _S_y_s_t_e_m in
                 this document or the _E_l_m _A_l_i_a_s _G_u_i_d_e.

          b      Bounce mail.  This  ``remails''  mail  to  someone
                 else  in  such a way as to make the return address
                 the original sender rather than you (as opposed to
                 the   _f_o_r_w_a_r_d  command,  which  makes  the  return
                 address _y_o_u rather than the original sender)

          c      Change mailbox.  Specifying  this  command  allows
                 the  user  to  change  the  mailbox  file  that is
                 currently  being  read.   This  is  intended   for
                 perusal and reply to previously archived messages.
                 The prompt is `Name of new mailbox : ' and  enter-
                 ing <return> cancels the operation, while entering
                 a filename causes the program to read that file as
                 the  new  mailbox  file, if possible.  As with the
                 _s_a_v_e command, this command expands filenames  with
                 `~'  being  your home directory and `=' being your
                 _m_a_i_l_d_i_r directory, if defined.  This command  also
                 allows  the  special  character  `!' to be used to
                 allow you to change to the default incoming  mail-
                 box.

          d, u   Delete and Undelete.  Neither of  these  two  com-
                 mands  have  any prompts and indicate their action



                                 Page 16







       Elm Reference Guide                              Version 1.5



                 by either adding an asterisk to the  current  mes-
                 sage  index entry (indicating deletion pending) or
                 removing the asterisk (indicating that  the  dele-
                 tion is cancelled).

          <control>-D This command allows you to  easily  mark  for
                 deletion  all  messages  that have a specific pat-
                 tern.  After <control>-D is pressed,  the  program
                 will  prompt for the string to match (currently it
                 only matches either the _f_r_o_m or _s_u_b_j_e_c_t  lines  of
                 the message).

          <control>-U This is the direct opposite  command  to  the
                 previous  -  all messages that match the specified
                 pattern can have any mark for deletion removed  by
                 using this command.

          e      Edit mailbox.   This  allows  you  to  modify  the
                 current  mail file at a single keystroke.  This is
                 mostly useful for  editing  down  messages  before
                 saving  them.   Modifying  headers  should be done
                 with extreme  caution,  as  they  contain  routing
                 information  and  other vital stuff for full func-
                 tionality.

          f      Forward.  Allows the user to forward  the  current
                 message  to  another user. This copies the message
                 into the edit buffer and allows the  user  to  add
                 their  own  message  too.   The prompt is `Forward
                 to:' and will expand an alias  if  entered.   (see
                 _b_o_u_n_c_e above, too)

          j, k   These two keys work similarly to what  they  would
                 do in _v_i or any of the other (precious few) screen
                 oriented programs.  The `j' key moves the  current
                 message pointer down to the next message (going to
                 the next page if needed) and the `k' key moves the
                 current  message pointer back to the previous mes-
                 sage (also changing pages if needed)

          l      Limit.  This new feature allows you to  specify  a
                 subset  of the existing messages to be dealt with.
                 For example, let's say we had a folder  with  four
                 hundred  messages  in  it, about four or five dif-
                 ferent subjects.  We could then limit  what  we're
                 dealing with by using the _l_i_m_i_t command.  Pressing
                 `l' would result in the prompt;

                        Criteria:

                 to which we  could  answer  ``subject  <string>'',



                                 Page 17







       Elm Reference Guide                              Version 1.5



                 ``from  <string>''  or  ``to  <string>''.   In our
                 example, we could use ``subject programming'' as a
                 criteria  for  selection.   Once we've limited our
                 selections down, the screen will be rewritten with
                 just  the  selected  messages,  they  will  all be
                 renumbered, and the top line will change to have a
                 message like;

                       Mailbox is `=/elm' with 92 shown out of 124 [Elm 1.5]

                 We  can  further  limit  selections  by   entering
                 further criteria, each time using the _l_i_m_i_t option
                 again.

                         To clear all the criteria and get back  to
                 the  `regular'  display,  simply  enter _a_l_l as the
                 limiting criteria.  It should be  noted  that  the
                 selection  based on ``to'' isn't fully implemented
                 for this version, so it is recommended that  users
                 stay  with  ``subject''  and ``from'' as the basis
                 for their criteria.

          m      Mail.  Send mail to a specified user.  The  prompt
                 that is associated with this command is `Send mail
                 to :'.  Entering an alias name results in the full
                 address  being  rewritten  in  parenthesis immedi-
                 ately.  This  prompt  is  followed  by  `Subject:'
                 which  allows  the  user to title their note.  The
                 final field is `Copies to: ', which  allows  other
                 people specified to receive "carbon copies" of the
                 message. Upon entering all three items the _v_i edi-
                 tor  (or any other editor specified by $editor) is
                 invoked and the message can be composed.

          n      Next message.  See <_r_e_t_u_r_n>.

          o      Options.  This full-screen display allows  you  to
                 alter  the  settings  of  a  number of parameters,
                 including the current sorting method,  the  method
                 of  printing  files,  the  calendar file, the save
                 file, and so  on.   It's  self-documenting  (where
                 have you heard _t_h_a_t before?) so isn't explained in
                 too much detail herein.

          p      Print.  This allows you to print out  the  current
                 message  or  the  tagged  messages to a previously
                 defined printer (see the  section  on  the  ._e_l_m_r_c
                 discussing the _p_r_i_n_t variable)

          q      Quit.  This command's action is dependent  on  the
                 current state of the EEEEllllmmmm program.  For example, if



                                 Page 18







       Elm Reference Guide                              Version 1.5



                 the current mailbox is  the  default  mailbox  the
                 messages  that  are  not  deleted are saved in the
                 file $home/mbox, whereas  if  it  is  a  specified
                 mailbox  the  to-be-deleted  messages  are removed
                 from the file.  The possible prompts are `Save  to
                 mailbox?' if the default mailbox is being read and
                 there is at least one message to save, 'Delete all
                 messages'  if  all  messages  in  any  mailbox are
                 marked for deletion or `Delete message(s)?' if not
                 reading  the  default  mailbox  and there are some
                 messages that should be saved.  A response of  `n'
                 (no)  to  either of these questions will result in
                 the quit command aborting,  and  the  files  being
                 untouched.

          r      Reply.  Reply to the author of  the  current  mes-
                 sage.   If the autocopy flag is not specified, the
                 program will prompt `Copy Message? (y/n)' to which
                 the  user can specify whether a copy of the source
                 message is to be copied into the edit  buffer,  or
                 not.  If copied in, all lines from the message are
                 prepended with the prefix character  sequence,  as
                 specified in the users ._e_l_m_r_c file.

          s      Save to file.  This  command  allows  the  current
                 message  or  set  of  tagged messages to be copied
                 into an arbitrary file.  If there is  anything  in
                 the  file  currently  the  message or messages are
                 appended to the end, otherwise the file is created
                 containing  only the newly saved mail.  The prompt
                 for this command is `Save to file : '.  A response
                 of  <return>  cancels  the command and returns the
                 user to the system prompt.  After saving  a  file,
                 each message is marked for deletion and, if saving
                 just one message, the current message  pointer  is
                 incremented.   The  usual  filename metacharacters
                 are available, too.

          t      Tag.  Tag the current message for a  later  opera-
                 tion849.

          <control>-T Tag all  messages  containing  the  specified
                 pattern.   Since  _t_a_g_g_i_n_g  messages  can  occur on
                 screens other than the one being viewed,  the  _E_l_m
                 system will first check to see if any messages are


       __________

        4. Currently only _p_i_p_e, _p_r_i_n_t, and _s_a_v_e support this.




                                 Page 19







       Elm Reference Guide                              Version 1.5



                 currently _t_a_g_g_e_d and ask  you  if  you'd  like  to
                 remove  those  tags.  After that, it will, similar
                 to the <_c_o_n_t_r_o_l>-_D function, prompt for a  pattern
                 to  match  and then mark for deletion all messages
                 that contain the  (case  insensitive)  pattern  in
                 either the _f_r_o_m or _s_u_b_j_e_c_t lines.

          x      Exit.  This is functionally the same as  answering
                 _No  to  the _q_u_i_t command prompt, and simply leaves
                 the program in the quickest possible manner.  This
                 command  can  also  occur  from  typing DELETE, or
                 control-Q, both of which are also _e_x_i_t commands.




       6.  TTTThhhheeee MMMMaaaaiiiillll AAAArrrrcccchhhhiiiivvvveeee FFFFiiiilllleeee



               The format of the mail saved to the archive file  is
       also  worth a quick discussion.  Unlike the usual exact copy
       of the entire header section, the archived mail has the fol-
       lowing header;

               From To:<name> 15 Jan 1985 4:54:30 MST
               To: <address>
               Subject: <subject>
               Cc: <address>

               <message body>

       The first line, the `From'  line,  is  deliberately  mangled
       with  the  occurrence  of the `To:<name' to ensure that when
       you are perusing your archive file with the mailer that  you
       see  _w_h_o  _t_h_e  _m_e_s_s_a_g_e _w_a_s _t_o, since they're all going to be
       from you!!  The <name> will either be the  machine!login  of
       the  person,  or, if originally addressed with an alias, the
       alias name.

               To read this file, you can use the mailer,  choosing
       the  the _c_h_a_n_g_e _m_a_i_l_b_o_x command, or start up specifying your
       archive file as the mailbox to read.











                                 Page 20







       Elm Reference Guide                              Version 1.5



       7.  UUUUssssiiiinnnngggg EEEELLLLMMMM wwwwiiiitttthhhh ````````eeeeddddiiiittttoooorrrr ==== nnnnoooonnnneeee''''''''



               The _E_l_m program also supports a builtin  editor  for
       simple  message  composition  that is very (very) similar to
       the simple line editor available from the _B_e_r_k_e_l_e_y _M_a_i_l sys-
       tem.

               To  access  it,   you   need   merely   to   specify
       ``editor=none''  in  your  ._e_l_m_r_c file.  With that, any mes-
       sages to be composed that don't already  have  text  in  the
       buffer (e.g. no reply with the text included, etc), will use
       this editor.

       From the builtin editor, the following options are available
       for use;


          ~?  Print a brief help menu.

          ~b  Change the Blind-Carbon-Copy list.

          ~c  Change the Carbon-Copy list.

          ~e  Invoke the Emacs editor on the message, if possible.

          ~f  add the specified list of messages, or current.

          ~h  Change all the available headers (To,  Cc,  Bcc,  and
              Subject)

          ~m  same as `~f', but with the current `prefix'.

          ~o  Invoke a user specified editor on the message.

          ~p  print out the message as typed in so far.

          ~r  Include (read in) the contents of the specified file.

          ~s  Change the Subject line.

          ~t  Change the To list.

          ~v  Invoke the Vi visual editor on the message.

          ~!  execute a  unix  command  if  one  is  given  (as  in
              ``~!ls'') or give the user a shell (either from their
              shell setting in their ._e_l_m_r_c file or $SHELL).





                                 Page 21







       Elm Reference Guide                              Version 1.5



          ~~  Add a line prefixed by a single `~' character.

       A useful note is that the `~f' and `~m' commands invoke  the
       _r_e_a_d_m_s_g  command, so you can pass parameters along too.  For
       example, if we wanted to include a message from Joe, without
       any headers, prefixed, we could use;

               ~m -n Joe

       to accomplish the task.

               To learn more about how they work, try 'em!




       8.  TTTThhhheeee AAAAlllliiiiaaaassss SSSSyyyysssstttteeeemmmm



               As mentioned previously, there  exists  in  the  EEEEllllmmmm
       system  a  set  of  aliases that associate an arbitrary word
       (such as a persons name) to a complex address or group.  The
       advantages  are readily apparent; rather than remembering an
       address of the form;

         machine1!machine2!machine3! ... !machineN!account

       the user merely has to remember a single word.

               Two alias tables  are  available  for  a  each  user
       within  EEEEllllmmmm,,,,  namely  the  system  alias file and the users'
       alias file.  The system alias file is created and maintained
       (by   the   system   administrator)   by  editing  the  file
       /_u_s_r/_m_a_i_l/._a_l_i_a_s__t_e_x_t as described in the documentation with
       the _n_e_w_a_l_i_a_s command, then running the _n_e_w_a_l_i_a_s program.

               An individual user can also have an alias file which
       works  in  conjunction with the system aliases.  To do this,
       they  need  merely  to  peruse  the  documentation  for  the
       _n_e_w_a_l_i_a_s  command  and  create  a file as indicated therein.
       After executing the program, the aliases will  be  available
       for using from within EEEEllllmmmm....

       Please refer to the _E_l_m _A_l_i_a_s _U_s_e_r_s _G_u_i_d_e for  more  helpful
       hints and so on.


       Within EEEEllllmmmm,,,, however, the alias system acts  as  an  entirely
       different program, with it's own commands and own mini-menu.
       The menu replaces the standard mini-menu with;



                                 Page 22







       Elm Reference Guide                              Version 1.5



       ---------------------------------------X------------------------------

                              Alias commands

       A)lias current message, Check a P)erson or S)ystem, M)ake new alias or R)eturn


       Alias: @
       ---------------------------------------X------------------------------


       The commands are;

          a      Alias current message. This  allows  the  user  to
                 create an alias that has the return address of the
                 current message as the address field of the alias.
                 It  prompts  for  a unique alias name.   Important
                 note: when you alias an address in  this  fashion,
                 the  mailer  will  try  to  minimize the amount it
                 needs to store by  iteratively  comparing  machine
                 names  in  the  path  with  the  machines  in  the
                 pathalias database.  Once it finds  an  entry  the
                 address will be saved at that point.   For further
                 information, please see the _E_l_m _A_l_i_a_s _U_s_e_r_s _G_u_i_d_e.

          p      Check personal alias.  This is  a  simple  way  of
                 checking  what  is  in  the  alias  database  - it
                 prompts for an alias name, and returns the address
                 associated  with  that  name  or the error message
                 `alias not found' as appropriate.

          s      Check system alias.  If you're not sure that  your
                 machine  can  talk to another machine, you can use
                 this command to either find the appropriate  route
                 or find that you're correct in your suspicions and
                 it is indeed unknown!

          m      Make user alias.  This will prompt  for  a  unique
                 alias  name and then for an address.  The informa-
                 tion provided will be  added  to  your  individual
                 alias_text file ($_h_o_m_e/._a_l_i_a_s__t_e_x_t) and then added
                 to the database.

          r      Return.  Return to the main level of the EEEEllllmmmm  pro-
                 gram.









                                 Page 23







       Elm Reference Guide                              Version 1.5



       9.  WWWWhhhhiiiilllleeee WWWWeeee''''rrrreeee TTTTaaaallllkkkkiiiinnnngggg AAAAlllliiiiaaaasssseeeessss............

               Another feature worthy  of  discussion,  since  it's
       been getting lots of veiled references throughout this docu-
       ment, is the host-path file.  This is implemented using  the
       uucp  pathalias  database, with a file containing lines with
       the format:

            _h_o_s_t_n_a_m_e <tab> _a_d_d_r_e_s_s!%s
         or
            _h_o_s_t_n_a_m_e <tab> %_s@_h_o_s_t_n_a_m_e

       The actual  details  of  the  file  are,  suprise,  suprise,
       located in the _A_l_i_a_s _S_y_s_t_e_m _U_s_e_r_s _G_u_i_d_e.

               Anyway, to use them is quite simple...when  specify-
       ing the address of someone, you can either have an alias for
       them already, resend to their mail to you, or use the system
       alias feature!

               Enough hype, right?  Okay...to use this feature, you
       specify  an  address  by either "machine!person" ignoring if
       your specific machine  can  talk  directly  to  the  machine
       specified, or, if you prefer the Internet addressing scheme,
       "person@machine".  When you enter the address as  specified,
       the  mailer  will quickly search through the pathalias data-
       base file and expand the specified address to be  a  legiti-
       mate routing address.

               What's really nice about this is  that  the  address
       that  we're  going  to send to can be either on ARPA, CSNET,
       BITNET, uucp, or any other network.  The method of  specify-
       ing the basic address is the same regardless!

               For example, mail to me  could  be  sent  as  either
       "hplabs!taylor"  or  "taylor@hplabs".   EEEEllllmmmm will expand them
       both in the same manner  and  include  a  ``route''  to  the
       machine _h_p_l_a_b_s, if needed.

       As the song goes, check the alias guide...

               For those sites with the domains database installed,
       you can also mail to users on domain based systems by simply
       specifying their name, the machine they receive mail on  and
       a full domain specification.

               For example, say you have a friend Maurice who reads
       mail  on JOEVAX in the Mailnet world.  You could mail to him
       by using the address "Maurice@JOEVAX.MAILNET" and your  sys-
       tem will expand the address correctly.




                                 Page 24







       Elm Reference Guide                              Version 1.5



               Guess where to go for more information...!!




       10.  EEEExxxxppppeeeerrrrtttt MMMMaaaaiiiillll UUUUsssseeeerrrrssss aaaannnndddd DDDDeeeebbbbuuuuggggggggiiiinnnngggg tttthhhheeee MMMMaaaaiiiilllleeeerrrr

               There are some additional  facilities  available  in
       the  EEEEllllmmmm mailer for those people who are knowledgeable about
       mail protocols, or trying to debug/track down a problem.

               The `h' _h_e_a_d_e_r_s command at the  outermost  level  of
       the  mailer  will  display  the current message ignoring the
       current setting of the `weed' option.  This is  most  useful
       for  answering questions of the form "I wonder what this guy
       put in his header?" and such.  This command does not show up
       on  the  mini-menu  because  it is somewhat esoteric, but it
       does appear on the `?' help screen (can you find  it  there,
       though?).

               The `@' command at the outermost level of the mailer
       will output a screen of debugging information, including the
       number of lines and offsets of each of the  message  in  the
       current mailbox.

               The `#' command at the outermost level of the mailer
       will  display  the  entire stored `record structure' for the
       current message.

               The `%' command at the outermost level of the mailer
       will display the full computed return address of the current
       message.

               Starting up EEEEllllmmmm with  the  "-d"  debug  option  will
       create  a  file called _E_l_m:_d_e_b_u_g._i_n_f_o in your home directory
       and contain a  wealth  of  useful  information  (to  me,  at
       least!)  to  aid  in tracking down what errors are occurring
       and why.


               If there are any problems with the  mailer,   please
       try  to recreate the error with the debug option enabled and
       set to the highest level (11) before sending defect  reports
       my way.



       One final note: all error names reported by the program  are
       documented   in  the  Bell  System  V  Reference  Manual  in
       _e_r_r_n_o(2).




                                 Page 25




